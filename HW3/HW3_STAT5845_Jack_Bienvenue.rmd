---
title: "Homework 3 - 2018 Housing Prices in CT"
author: Jack Bienvenue
date: 12 September 2025
format: pdf
header-includes:
  - \usepackage{tcolorbox}
  - \tcbset{colback=red!10!white, colframe=red!80!black, boxrule=0.5pt, arc=3pt, left=6pt, right=6pt, top=6pt, bottom=6pt}
  - \usepackage{xcolor}
  - \newcommand{\red}[1]{\textcolor{red}{#1}}
---

# Task 1: Replicating CT Home Value Map

```{r}
# Package import
invisible(suppressWarnings(suppressMessages(lapply(c("sp", "spdep", "ggplot2",
                                                     "gstat", "sf", 
                                                     "RColorBrewer"), 
                                            require, character.only = TRUE))))
# Data import
## Median home values for CT towns
med_home_ct18_df <- read.csv("./data/median-home-value-town-2018.csv")
## CT towns (I am importing from my own shapefile I produced in the past)
ct_shp<- st_read("./data/ct_towns/ct_towns.shp")

# Inspect shapefile

```
Let's start preparing for our analysis by cleaning our data.

```{r}
# Ensure only Connecticut's towns are included for the shapefile
ct_shp = ct_shp[ct_shp$CT_LEGEND == "Connecticut", ]

# Ensure only relevant data is present in our home value dataframe:
med_home_ct18_df = (
  med_home_ct18_df[med_home_ct18_df$Variable == "Median Home Value" &
                     med_home_ct18_df$Year == "2014-2018" &
                     med_home_ct18_df$Measure.Type == "Number",]
)
```

To replicate the plot for Task 1, we will have to start by obtaining Z-scores for the median home value of each town. After that, we will merge the data sets. At last we will reproduce the map.

```{r}
# Create Z-score column
med_home_ct18_df$med_home_val_z_score <- scale(med_home_ct18_df$Value)

# Merge data
ct_merged <- merge(ct_shp, med_home_ct18_df, 
                   by.x = "TOWN_NAME", 
                   by.y = "Town", 
                   all.x = TRUE)
# Build map 
ggplot(data = ct_merged) +
  # Fill each tract polygon by its standardized incidence
  geom_sf(aes(fill = med_home_val_z_score)) +
  # Diverging color scale: red = above average, blue = below average
  scale_fill_gradient2(low = "blue", mid = "white", high = "red",
                       midpoint = 0,
                       name = "Standardized Z") +
  # Add labels
  labs(title = "Standardized Median Home Value (Z-scores)",
       subtitle = "Z = 0 is the statewide average; red = above, blue = below") +
  theme_minimal()
```


```{=tex}
\centering{\red{Question: What can you say about the home values in CT?}}

\begin{tcolorbox}
We can see easily in our map that there is a concentration of high median home values for towns in Southwestern Connecticut---the corner of the state closest to New York City. We see high home values in a few other enclaves, including around Lyme, Connecticut (which is near major, lucrative employers Pfizer, Electric Boat, US Coast Guard Academy, and Dominion Energy) and along the western border of the state, where country homes for wealthy vacation home owners are located. We see that the inland, eastern portion of the state generally possesses lower-than-median home values. We also see bands of lower-than-median home value towns in the central-western portion of the state. This plot does not provide information about absolute-scale median home prices. 
\end{tcolorbox}
```

# Task 2: Replicating Moran's I Scatterplot

```{r}

```

```{=tex}
\centering{\red{Question: What can you say about the spatial autocorrelation of home values in CT?}}

\begin{tcolorbox}
I
\end{tcolorbox}
```

# Task 3: Replacing Spatial Clustering Map

```{r}

```

```{=tex}
\centering{\red{Question: What can you say about the spatial clustering of housing prices in CT? Why do
Highâ€“High clusters appear in the southwest part of the state?}}

\begin{tcolorbox}
The clustering as shown illuminates the fact that some towns of Southwestern Connecticut---in particular, a subset of Fairfield County's towns---have high average home values, and their neighboring towns do as well.

We notice an absence of the other cluster types.
\end{tcolorbox}
```